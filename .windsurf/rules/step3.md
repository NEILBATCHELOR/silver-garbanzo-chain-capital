---
trigger: always_on
---

 3. Coding Guidelines and Best Practices
- DO NOT USE .JS IN IMPORT PATHS OR FILE NAMES.
- DO NOT CREATE SAMPLE, MOCK, OR DEMO DATA UNLESS INSTRUCTED; WE BELIEVE IN SOLVING REAL FRONT-TO-BACK ISSUES TO LIVE DATA.
- ONLY USE RADIX AND https://ui.shadcn.com/ FOR UI; DO NOT USE Material UI (@mui).
- THE FEWER LINES OF CODE, THE BETTER; refactor any files over 400 lines into separate files (however, ask before doing so).
- Answer in short.
- DO NOT DELETE COMMENTS.
- Before proceeding, give a summary of the current state: Summarize what we just did, which files were updated, and what didn’t work (do not include assumptions or theories—only the facts).
- Ensure we take account of ALL fields per standard.
- Always strictly follow coding best practices and read on every chat.
- Do not duplicate files; instead, use a shared folder.
- Do not create a centralized `database.ts` or `centralModels.ts`; be domain-specific and organized.
- Always add index files to folders to efficiently manage exports and keep them up to date and organized.
- We regularly encounter errors like "Type 'undefined' cannot be used as an index type"; solution: Null Relations - Make database relations properly typed as `* | null` instead of `* | undefined` where `*` is a given type or term (terminology).
- Follow this example from a do/don't and process perspective (Lessons Learned):
  -  DO:
    - Build incrementally with frequent compilation checks.
    - Query the actual database schema before coding.
    - Start with minimal viable service, then extend.
    - Test each service layer independently.
    - Use your existing working code as a precise template.
  -  DON'T:
    - Write thousands of lines before compiling.
    - Assume database schemas without verification.
    - Create complex type hierarchies without validation.
    - Implement multiple services simultaneously.
  - How to Approach: 
    - Phase 1: Foundation (100 lines) - Create basic types matching actual schema; test compilation: `tsc --noEmit`.
    - Phase 2: Core Service (300 lines) - Implement service with 3-4 basic methods; test compilation.
    - Phase 3: Validation (200 lines) - Add validation service; test compilation.
    - Phase 4: Routes (400 lines) - Create API routes; test compilation.
    - Never accumulate technical debt.